<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=0.86, maximum-scale=3.0, minimum-scale=0.86">
	<style>@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,700");:root{--color-background: #222;--color-text: #ccc;--color-hr: #fff1;--color-blockquote-background: #0003;--color-blockquote-border: #fff3;--color-article-background: #29292b;--color-article-border: #3f4046;--color-article-box-shadow: #004;--color-background-content-warning: #131314;--border-article-width: 2px;--font-weight: 300;--font-weight-nav: inherit}:root.scheme-light{--color-background: #f3f3f3;--color-text: #000;--color-hr: #0001;--color-blockquote-background: #0001;--color-blockquote-border: #0003;--color-article-background: #eee;--color-article-border: #ccc;--color-article-box-shadow: #004;--color-background-content-warning: #a8a8b6;--border-article-width: 1px;--font-weight: 400;--font-weight-nav: 700}body{background:var(--color-background);display:block;margin:auto;text-align:center;width:calc(100% - 200px);max-width:900px;position:relative;color:var(--color-text);font-family:"Open Sans", "Segoe UI", sans-serif;display:flex;flex-direction:column;font-weight:var(--font-weight);letter-spacing:.03em;line-height:1.5em;min-height:100vh;padding:10px;box-sizing:border-box}@media (max-width: 1100px){body{width:100%}}main{flex:1 0 auto}footer{margin:40px;color:#999;flex-shrink:0;font-weight:400}#logo{border:none}#logo>img{display:inline-block;width:calc(100% - 20px);max-width:650px;margin:10px}#logo:focus{filter:brightness(1.1)}a{color:#d94e8f;text-decoration:none;border-bottom:1px solid transparent;font-weight:400}a:hover,a:focus{border-color:currentColor;outline:none}nav a{text-decoration:none;padding:10px;margin:10px;position:relative;transition:color .3s ease-in-out;border:none;font-weight:var(--font-weight-nav)}nav a::before{content:"";position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:0px;height:2px;background:currentColor;transition:all .3s ease-in-out}nav a:hover,nav a:focus{color:#f064a5;outline:none;transition:color .03s ease-in-out}nav a:hover::before,nav a:focus::before{width:100%;transition:all .03s ease-in-out}button{background:none;border:none;outline:none;color:#777;padding:6px 10px;font-family:inherit;font-size:inherit}button:hover,button:focus{color:#51bfff;cursor:pointer}h2{font-weight:300}article{text-align:left;background:var(--color-article-background);border:var(--border-article-width) solid var(--color-article-border);padding:20px;margin:20px;box-shadow:0 1px 3px var(--color-box-shadow-article)}article h1{font-size:2em;font-weight:400;margin-top:0}article>.header{display:grid;grid-template-columns:1fr auto}article>.header>*{margin:0}article>.header>.date{grid-column:2;grid-row:1/3;margin-left:15px}article>.header>.title{grid-column:1;grid-row:1}article>.header>.author{grid-column:1;grid-row:2}article>.body{grid-column:1/3;grid-row:3;margin-top:15px}article>.body>*:last-child{margin-bottom:0}article>.footer{margin-top:10px;margin-bottom:0}article>.subtitle{color:#777}blockquote{background:var(--color-blockquote-background);padding:10px;border-left:4px solid var(--color-blockquote-border);margin:0;margin-top:20px;margin-bottom:20px}blockquote>p:first-child{margin-top:0}blockquote>p:last-child{margin-bottom:0}li:not(:last-child){margin-bottom:5px}sub,.unimportant{color:#888;font-weight:400}sub a,.unimportant a{color:#1d6f9e;font-weight:700}.labelled-link{color:#777}.labelled-link>a{margin-left:10px}.suggested-by{color:#ccc;margin-left:10px}.hidden-chapters{margin-top:-7px;margin-bottom:7px}.submission .chapters{display:grid;grid-template-columns:auto auto 1fr;list-style-type:none;padding-left:20px;margin-top:10px;margin-bottom:10px}.submission .chapters>.volume{grid-column:1/3}.submission .chapters>.volume>label{opacity:0.4;margin-right:6px}.submission .chapters>.hidden-chapters{grid-column:2;opacity:0.4}.submission .chapters>.chapter{opacity:0.4;margin-right:15px;text-align:right;grid-column:1}.submission .chapters>.chapter-link-wrapper{grid-column:2;margin-bottom:3px}.submission>.header>.date{display:grid;grid-template-columns:auto auto}.rss-link{display:inline-block;width:1em;height:1em;box-sizing:border-box;position:relative;margin-left:10px;vertical-align:bottom;margin-bottom:-2px;margin-top:2px}.rss-link>svg{position:absolute;top:50%;left:50%;width:calc(100% - 8px);height:calc(100% - 8px);transform:translate(-50%, -50%)}.submission-description{margin-bottom:15px;white-space:pre-wrap}.submission-metadata{display:block;margin-bottom:-5px !important}.tag>a{color:#69B3E2}.tag+.tag::before{content:", ";opacity:0.5;margin-left:-5px}hr{opacity:0.2}.text-align-left{text-align:left}.text-align-center{text-align:center}.text-align-right{text-align:right}.hidden{display:none !important}.checkbox{display:grid;grid-template-columns:0px 1fr}.checkbox>input{opacity:0}.checkbox>label{position:relative;display:inline-block;padding-left:26px}.checkbox>label::before,.checkbox>label::after{position:absolute;display:inline-block}.checkbox>label::before{content:"";height:16px;width:16px;border:1px solid currentColor;left:0px;top:3px}.checkbox>label::after{height:5px;width:9px;border-left:2px solid currentColor;border-bottom:2px solid currentColor;transform:rotate(-45deg);left:4px;top:7px}.checkbox>input:checked+label::after{content:""}.checkbox>input:focus+label,.checkbox>input:hover+label{color:#51bfff}.volume{margin-left:-20px;margin-bottom:5px}.alt-link{text-align:left}.alt-link>h3{margin-top:40px;font-weight:400}.alt-link>h3>a{font-weight:400}.other-prompts{display:grid;grid-template-columns:1fr 1fr;padding:0 30px;margin-bottom:-30px}.other-prompts>*:last-child{text-align:right}.other-prompts>*:first-child{text-align:left}.current-prompt{border-color:#d94e8f;border-width:1px}.interrupt{position:fixed;top:0;left:0;width:100%;height:100vh;background:#333e;z-index:2;display:grid;grid-template-columns:1fr auto 1fr;grid-template-rows:1fr auto 1fr}.interrupt>article{max-width:800px;width:80vw;grid-column:2;grid-row:2}.interrupt h1,.interrupt h2{margin-bottom:20px}.interrupt .checkbox,.interrupt p{margin-top:0;margin-bottom:8px}.interrupt .section{padding-left:20px;margin-bottom:30px}.interrupt-close{width:1em;height:1em;position:relative;float:right;margin-top:-5px}.interrupt-close::before,.interrupt-close::after{content:"";width:1em;height:2px;background:currentColor;transform-origin:center;top:50%;left:50%;position:absolute}.interrupt-close::before{transform:translate(-50%, -50%) rotate(45deg)}.interrupt-close::after{transform:translate(-50%, -50%) rotate(-45deg)}</style>
	<title>Turn me into a girl</title>
</head>
<body>
	<button id="change-me">Turn me into a girl</button>
	<article class="chapter" style="display: none" id="description-overall">
		<div class="body">
			<p>You are a girl now.</p>
			<p id="description-introduction"></p>
		</div>
	</article>
<script type="text/javascript">!function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)t.d(r,i,function(e){return n[e]}.bind(null,i));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=0)}([function(n,e,t){"use strict";function r(n,e){for(const t of e)n.push(t)}function i(n,e){return n=Math.ceil(n),e=Math.floor(e),function(n,e,t){return Math.floor(n*(t-e))+e}(Math.random(),n,e)}function o(n){return n[i(0,n.length)]}t.r(e);class a{constructor(n=null,e,t=null){this.article=n,this.name=e,this.value=t}}class s{constructor(n,e){this.value=n,this.valueClass=e}}class u{constructor(n,e){this.kind=n,this.unit=e}}class l{constructor(n,e=null,t=[],r=[]){this.primaryDescription=n,this.kind=e,this._descriptions=t,this._properties=r}get descriptions(){const n=[];for(let e=this;null!=e;e=e.kind)r(n,e._descriptions);return n.push(this.primaryDescription),n}get properties(){const n=[];for(let e=this;null!=e;e=e.kind)r(n,e._properties);return n}isOfSameKindAs(n){for(let e=this;null!=e;e=e.kind)if(n===e)return!0;return!1}shallowClone(){return new l(this.primaryDescription,this.kind,this._descriptions,this._properties)}withDescriptions(n){const e=this.shallowClone();return e._descriptions=n,e}withProperties(n){const e=this.shallowClone();return e._properties=n,e}}function c(){const n=function(){const n=i(15,23),e=v.get(n),t=Math.floor(function(n=0,e=1){var t,r,i;do{t=(r=2*Math.random()-1)*r+(i=2*Math.random()-1)*i}while(t>=1);return e*(r*Math.sqrt(-2*Math.log(t)/t))+n}(e.mean,e.std));return{age:n,height:t,bust:90,underbust:75,waist:60,hips:90}}(),e=o(["Yomi","Rei","Yuki","Asuka","Eri","Sakuya","Karin","Naoko","Erin","Erika","Yuu","Minami","Maki","Ayako","Nagisa","Shiori","Nayuki","Miyuki","Chigusa","Rin","Emi","Naomi","Tomo","Sayaka","Madoka"]),t=n.age,r=o(["Fukuoka","Tokyo","Kyoto","Osaka"]),c=n.height,m=function(n){return new l(o(Y),M,[o(d),o(h)],[new a("an","underbust",new s(n.underbust,new u("underbust","cm"))),new a("a","bust",new s(n.bust,new u("bust","cm")))])}(n),g=o(["modest","small","moderate","modest","modest","modest","large","volumptuous"]),_=k([m]);return`Your name is ${e}, you're a ${t} year old girl living in ${r}. You're ${c}cm tall. ${o(["Your hair is tied in a ponytail","Your hair is tied in twintails","You have long hair","Your hair is short","You have curly hair"])}. You're wearing ${k(function(n){const e=new Array;if(n.age<=18&&Math.random()<.2)return e.push(new l(new a("a","schoolgirl uniform"),w)),e;const t=o(f).withDescriptions([o(d)]);e.push(t),t.isOfSameKindAs(w)||e.push(o(y));Math.random()<.2&&e.push(o(b));return e}(n))}. Your ${g} chest is covered by ${_}. You like ${o(p).name}. ${o(["You have an outgoing personality","You're a shy girl","You're full of energy","You have a tomboyish personality"])}.`+"\n\n"+function(n){const e=Math.random();return e<.95?"You are currently single.":e<.99?"You have a girlfriend.":"You have a boyfriend."}()}const d=[new a("a","fancy"),new a("a","cute"),new a("an","adorable"),new a("a","plain")];const h=[new a("a","pink"),new a("a","black"),new a("a","white"),new a("a","blue"),new a("a","green")],p=[new a(null,"cooking"),new a(null,"playing computer games"),new a(null,"watching anime"),new a(null,"reading manga"),new a(null,"dressing up in cute clothes"),new a(null,"travelling"),new a(null,"sports"),new a(null,"cycling")],w=new l(new a("a","full body clothing")),m=new l(new a("a","dress"),w),f=[new l(new a("a","sundress"),m),new l(new a("a","tank top")),new l(new a("a","camisole")),m],g=new l(new a("a","skirt")),y=[g.withDescriptions([new a("a","pleated")]),g,new l(new a("a","miniskirt")),new l(new a(null,"leggings")),new l(new a(null,"pants"))],b=[new l(new a("a","straw hat"))];function k(n){const e=n.map(n=>{const e=n.descriptions[0].article;let t=n.descriptions.map(n=>n.name).join(" ");return e&&(t=e+" "+t),t}),t=e.pop();let r=e.join(", ");return 0!==e.length&&(r+=" and "),void 0!==t&&(r+=t),r}const v=new Map([[15,{mean:157.37,std:5.23}],[16,{mean:157.42,std:5.08}],[17,{mean:158.17,std:5.31}],[18,{mean:158.36,std:5.24}],[19,{mean:158.12,std:5.38}],[20,{mean:158.7,std:5.3}],[21,{mean:158.7,std:5.3}],[22,{mean:158.7,std:5.3}],[23,{mean:158.7,std:5.3}],[24,{mean:158.7,std:5.3}]]);const M=new l(new a("a","bra")),Y=[new a("a","bralette"),new a("a","full-cup bra"),new a("a","sports bra"),new a("a","push-up bra")];document.getElementById("change-me").onclick=()=>{document.getElementById("change-me").style.cssText="display: none",document.getElementById("description-introduction").innerText=c(),document.getElementById("description-overall").style.cssText="display: block"}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL1V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9EZXNjcmlwdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVmFsdWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1ZhbHVlQ2xhc3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0VudGl0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJwdXNoQWxsIiwidGFyZ2V0IiwiZWxlbWVudHMiLCJlbGVtZW50IiwicHVzaCIsInVuaWZvcm1JbnQiLCJtaW4iLCJtYXgiLCJNYXRoIiwiY2VpbCIsImZsb29yIiwieCIsImFkYXB0UmFuZ2UiLCJyYW5kb20iLCJ1bmlmb3JtQ2hvaWNlIiwibGVuZ3RoIiwiRGVzY3JpcHRpb24iLCJbb2JqZWN0IE9iamVjdF0iLCJhcnRpY2xlIiwidGhpcyIsIlZhbHVlIiwidmFsdWVDbGFzcyIsIlZhbHVlQ2xhc3MiLCJraW5kIiwidW5pdCIsIkVudGl0eV9FbnRpdHkiLCJwcmltYXJ5RGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbnMiLCJwcm9wZXJ0aWVzIiwiX2Rlc2NyaXB0aW9ucyIsIl9wcm9wZXJ0aWVzIiwiY3VycmVudCIsIm90aGVyIiwiZHN0Iiwic2hhbGxvd0Nsb25lIiwicmVyb2xsIiwicXVhbnRpdGllcyIsImFnZSIsImhlaWdodERpc3RyaWJ1dGlvbiIsImFnZUhlaWdodERpc3RyaWJ1dGlvbnMiLCJoZWlnaHQiLCJtZWFuIiwiZGV2IiwidSIsInYiLCJzcXJ0IiwibG9nIiwibm9ybWFsIiwic3RkIiwiYnVzdCIsInVuZGVyYnVzdCIsIndhaXN0IiwiaGlwcyIsImdlbmVyYXRlUXVhbnRpdGllcyIsImNpdHkiLCJicmEiLCJicmFUeXBlc0Rlc2NyaXB0aW9ucyIsInNyY19icmEiLCJwb3NpdGl2ZUFkamVjdGl2ZXMiLCJjb2xvcnMiLCJnZW5lcmF0ZUJyYSIsImNoZXN0RGVzY3JpcHRpb24iLCJicmFEZXNjcmlwdGlvbiIsImRlc2NyaWJlIiwiY2xvdGhlcyIsIkFycmF5IiwiZnVsbEJvZHlDbG90aGluZyIsInRvcCIsInRvcHMiLCJ3aXRoRGVzY3JpcHRpb25zIiwiaXNPZlNhbWVLaW5kQXMiLCJib3R0b21zIiwiaGVhZEFkZGl0aW9ucyIsImdlbmVyYXRlQ2xvdGhlcyIsImhvYmJpZXMiLCJwYXJ0bmVyIiwicm9sbCIsImRlc2NyaWJlUGFydG5lciIsImRyZXNzIiwic2tpcnQiLCJlbnRpdGllcyIsImluZGl2aWR1YWxEZXNjcmlwdGlvbnMiLCJtYXAiLCJmaXJzdEFydGljbGUiLCJ0ZXh0Iiwiam9pbiIsImxhc3RFbGVtZW50IiwicG9wIiwiZW50aXJlRGVzY3JpcHRpb24iLCJ1bmRlZmluZWQiLCJNYXAiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwib25jbGljayIsInN0eWxlIiwiY3NzVGV4dCIsImlubmVyVGV4dCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFB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TUFDMUIsQ0FBQyxHQUFJLENBQUVQLEtBQU0sTUFBUU8sSUFBSyxRQW1COUIsTUFBTVMsRUFBTSxJQUFJaEMsRUFBTyxJQUFJVCxFQUFZLElBQUssUUFDdEN3QyxFQUF1QixDQUN6QixJQUFJeEMsRUFBWSxJQUFLLFlBQ3JCLElBQUlBLEVBQVksSUFBSyxnQkFDckIsSUFBSUEsRUFBWSxJQUFLLGNBQ3JCLElBQUlBLEVBQVksSUFBSyxnQkFnRHpCMkUsU0FBU0MsZUFBZSxhQUFjQyxRQUFVLEtBQzVDRixTQUFTQyxlQUFlLGFBQWNFLE1BQU1DLFFBQVUsZ0JBQ3RESixTQUFTQyxlQUFlLDRCQUE2QkksVUFBWTdELElBQ2pFd0QsU0FBU0MsZUFBZSx1QkFBd0JFLE1BQU1DLFFBQVUiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGFkZFRvU2V0PFQ+KHNldCA6IFNldDxUPiwgZWxlbWVudCA6IFQpIDogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBwcmV2U2l6ZSA9IHNldC5zaXplO1xyXG4gICAgc2V0LmFkZChlbGVtZW50KTtcclxuICAgIGNvbnN0IGN1cnJTaXplID0gc2V0LnNpemU7XHJcbiAgICByZXR1cm4gY3VyclNpemUgIT0gcHJldlNpemU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwdXNoQWxsPFQ+KHRhcmdldCA6IEFycmF5PFQ+LCBlbGVtZW50cyA6IEl0ZXJhYmxlPFQ+KSB7XHJcbiAgICBmb3IoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xyXG4gICAgICAgIHRhcmdldC5wdXNoKGVsZW1lbnQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRhcHRSYW5nZSh4IDogbnVtYmVyLCBtaW4gOiBudW1iZXIsIG1heCA6IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoeCAqIChtYXggLSBtaW4pKSArIG1pbjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGN1dE9mZlJhbmdlKHggOiBudW1iZXIsIG1pbiA6IG51bWJlciwgbWF4IDogbnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICBpZih4IDwgbWluKSByZXR1cm4gbWluO1xyXG4gICAgaWYoeCA+IG1heCkgcmV0dXJuIG1heDtcclxuICAgIHJldHVybiB4O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdW5pZm9ybUludChtaW4gOiBudW1iZXIsIG1heCA6IG51bWJlcikge1xyXG4gICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICBtYXggPSBNYXRoLmZsb29yKG1heCk7XHJcbiAgICByZXR1cm4gYWRhcHRSYW5nZShNYXRoLnJhbmRvbSgpLCBtaW4sIG1heCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1bmlmb3JtQ2hvaWNlPFQ+KGVsZW1lbnRzIDogUmVhZG9ubHlBcnJheTxUPikgOiBUIHtcclxuICAgIHJldHVybiBlbGVtZW50c1t1bmlmb3JtSW50KDAsIGVsZW1lbnRzLmxlbmd0aCldO1xyXG59XHJcblxyXG4vKlxyXG5UaGUgTUlUIExpY2Vuc2UgKE1JVClcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNiBNT0NLLUVORFxyXG5cclxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG5vZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXHJcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcclxudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxyXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcclxuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcclxuXHJcblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxyXG5jb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcclxuU09GVFdBUkUuXHJcbiovICBcclxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbChtZWFuIDogbnVtYmVyID0gMCwgZGV2IDogbnVtYmVyID0gMSkge1xyXG4gICAgdmFyIHM7XHJcbiAgICB2YXIgdTtcclxuICAgIHZhciB2O1xyXG4gICAgdmFyIG5vcm07XHJcbiAgXHJcbiAgICBkbyB7XHJcbiAgICAgICAgdSA9IE1hdGgucmFuZG9tKCkgKiAyIC0gMTtcclxuICAgICAgICB2ID0gTWF0aC5yYW5kb20oKSAqIDIgLSAxO1xyXG4gICAgICAgIHMgPSB1ICogdSArIHYgKiB2O1xyXG4gICAgfSB3aGlsZSAocyA+PSAxKTtcclxuICAgIG5vcm0gPSB1ICogTWF0aC5zcXJ0KC0yICogTWF0aC5sb2cocykgLyBzKTtcclxuICAgIHJldHVybiBkZXYgKiBub3JtICsgbWVhbjtcclxufSIsImltcG9ydCBWYWx1ZSBmcm9tIFwiLi9WYWx1ZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVzY3JpcHRpb24ge1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBhcnRpY2xlIDogc3RyaW5nIHwgbnVsbCA9IG51bGwsXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IG5hbWUgOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHZhbHVlIDogVmFsdWUgfCBudWxsID0gbnVsbCkge1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFZhbHVlQ2xhc3MgZnJvbSBcIi4vVmFsdWVDbGFzc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmFsdWUge1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSB2YWx1ZSA6IG51bWJlcixcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgdmFsdWVDbGFzcyA6IFZhbHVlQ2xhc3MpIHtcclxuICAgICAgICBcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhbHVlQ2xhc3Mge1xyXG4gICAgLy9wdWJsaWMgcmVhZG9ubHkgZGlzdHJpYnV0aW9uIDogKHg6IG51bWJlcikgPT4gbnVtYmVyXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGtpbmQgOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHVuaXQgOiBzdHJpbmcpIHtcclxuICAgICAgICBcclxuICAgIH1cclxufSIsImltcG9ydCBEZXNjcmlwdGlvbiBmcm9tIFwiLi9EZXNjcmlwdGlvblwiO1xyXG5pbXBvcnQgeyBwdXNoQWxsLCBhZGRUb1NldCB9IGZyb20gXCIuL1V0aWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnRpdHkge1xyXG4gICAgcHJpdmF0ZSBfZGVzY3JpcHRpb25zIDogUmVhZG9ubHlBcnJheTxEZXNjcmlwdGlvbj47XHJcbiAgICBwcml2YXRlIF9wcm9wZXJ0aWVzIDogUmVhZG9ubHlBcnJheTxEZXNjcmlwdGlvbj47XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBwcmltYXJ5RGVzY3JpcHRpb24gOiBEZXNjcmlwdGlvbixcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkga2luZCA6IEVudGl0eSB8IG51bGwgPSBudWxsLFxyXG4gICAgICAgIGRlc2NyaXB0aW9ucyA6IFJlYWRvbmx5QXJyYXk8RGVzY3JpcHRpb24+ID0gW10sXHJcbiAgICAgICAgcHJvcGVydGllcyA6IFJlYWRvbmx5QXJyYXk8RGVzY3JpcHRpb24+ID0gW10pIHtcclxuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbnMgPSBkZXNjcmlwdGlvbnM7XHJcbiAgICAgICAgdGhpcy5fcHJvcGVydGllcyA9IHByb3BlcnRpZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBkZXNjcmlwdGlvbnMoKSA6IFJlYWRvbmx5QXJyYXk8RGVzY3JpcHRpb24+IHtcclxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbnMgOiBBcnJheTxEZXNjcmlwdGlvbj4gPSBbXTtcclxuICAgICAgICBmb3IobGV0IGN1cnJlbnQgOiBFbnRpdHkgfCBudWxsID0gdGhpczsgY3VycmVudCAhPSBudWxsOyBjdXJyZW50ID0gY3VycmVudC5raW5kKSB7XHJcbiAgICAgICAgICAgIHB1c2hBbGwoZGVzY3JpcHRpb25zLCBjdXJyZW50Ll9kZXNjcmlwdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZXNjcmlwdGlvbnMucHVzaCh0aGlzLnByaW1hcnlEZXNjcmlwdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHByb3BlcnRpZXMoKSA6IFJlYWRvbmx5QXJyYXk8RGVzY3JpcHRpb24+IHtcclxuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzIDogQXJyYXk8RGVzY3JpcHRpb24+ID0gW107XHJcbiAgICAgICAgZm9yKGxldCBjdXJyZW50IDogRW50aXR5IHwgbnVsbCA9IHRoaXM7IGN1cnJlbnQgIT0gbnVsbDsgY3VycmVudCA9IGN1cnJlbnQua2luZCkge1xyXG4gICAgICAgICAgICBwdXNoQWxsKHByb3BlcnRpZXMsIGN1cnJlbnQuX3Byb3BlcnRpZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJvcGVydGllcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNPZlNhbWVLaW5kQXMob3RoZXIgOiBFbnRpdHkpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgZm9yKGxldCBjdXJyZW50IDogRW50aXR5IHwgbnVsbCA9IHRoaXM7IGN1cnJlbnQgIT0gbnVsbDsgY3VycmVudCA9IGN1cnJlbnQua2luZCkge1xyXG4gICAgICAgICAgICBpZihvdGhlciA9PT0gY3VycmVudCkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNoYWxsb3dDbG9uZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVudGl0eSh0aGlzLnByaW1hcnlEZXNjcmlwdGlvbiwgdGhpcy5raW5kLCB0aGlzLl9kZXNjcmlwdGlvbnMsIHRoaXMuX3Byb3BlcnRpZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB3aXRoRGVzY3JpcHRpb25zKGRlc2NyaXB0aW9ucyA6IFJlYWRvbmx5QXJyYXk8RGVzY3JpcHRpb24+KSA6IEVudGl0eSB7XHJcbiAgICAgICAgY29uc3QgZHN0ID0gdGhpcy5zaGFsbG93Q2xvbmUoKTtcclxuICAgICAgICBkc3QuX2Rlc2NyaXB0aW9ucyA9IGRlc2NyaXB0aW9ucztcclxuICAgICAgICByZXR1cm4gZHN0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB3aXRoUHJvcGVydGllcyhwcm9wZXJ0aWVzIDogUmVhZG9ubHlBcnJheTxEZXNjcmlwdGlvbj4pIDogRW50aXR5IHtcclxuICAgICAgICBjb25zdCBkc3QgPSB0aGlzLnNoYWxsb3dDbG9uZSgpO1xyXG4gICAgICAgIGRzdC5fcHJvcGVydGllcyA9IHByb3BlcnRpZXM7XHJcbiAgICAgICAgcmV0dXJuIGRzdDtcclxuICAgIH1cclxufSIsImltcG9ydCB7IHB1c2hBbGwsIGFkZFRvU2V0LCB1bmlmb3JtQ2hvaWNlLCB1bmlmb3JtSW50LCBub3JtYWwgfSBmcm9tIFwiLi9VdGlsc1wiO1xyXG5pbXBvcnQgRGVzY3JpcHRpb24gZnJvbSBcIi4vRGVzY3JpcHRpb25cIjtcclxuaW1wb3J0IFZhbHVlIGZyb20gXCIuL1ZhbHVlXCI7XHJcbmltcG9ydCBWYWx1ZUNsYXNzIGZyb20gXCIuL1ZhbHVlQ2xhc3NcIjtcclxuaW1wb3J0IEVudGl0eSBmcm9tIFwiLi9FbnRpdHlcIjtcclxuXHJcbmZ1bmN0aW9uIHJlcm9sbCgpIHtcclxuICAgIGNvbnN0IHF1YW50aXRpZXMgPSBnZW5lcmF0ZVF1YW50aXRpZXMoKTtcclxuICAgIGNvbnN0IG5hbWUgPSBnZW5lcmF0ZU5hbWUoKTtcclxuICAgIGNvbnN0IGFnZSA9IHF1YW50aXRpZXMuYWdlOyAvL2N1dE9mZlJhbmdlKGFkYXB0UmFuZ2Uobm9ybWFsRGlzdHJpYnV0aW9uWmVyb1RvT25lKCksIDE1LTQsIDIyKzQpLCAxNSwgMjIpLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBjaXR5ID0gdW5pZm9ybUNob2ljZShbXCJGdWt1b2thXCIsIFwiVG9reW9cIiwgXCJLeW90b1wiLCBcIk9zYWthXCJdKTtcclxuICAgIGNvbnN0IGhlaWdodCA9IHF1YW50aXRpZXMuaGVpZ2h0OyAvL2N1dE9mZlJhbmdlKGFkYXB0UmFuZ2Uobm9ybWFsRGlzdHJpYnV0aW9uWmVyb1RvT25lKCksIDE0MC0zNSwgMTk1KzM1KSwgMTQwLCAxOTUpXHJcbiAgICBjb25zdCBicmEgPSBnZW5lcmF0ZUJyYShxdWFudGl0aWVzKTtcclxuICAgIGNvbnN0IGNoZXN0RGVzY3JpcHRpb24gPSBkZXNjcmliZUJyYVNpemUoYnJhKTtcclxuICAgIGNvbnN0IGJyYURlc2NyaXB0aW9uID0gZGVzY3JpYmUoW2JyYV0pO1xyXG4gICAgY29uc3QgaGFpckRlc2NyaXB0aW9uID0gZ2VuZXJhdGVIYWlyRGVzY3JpcHRpb24oKTtcclxuICAgIGNvbnN0IGNsb3RoZXNEZXNjcmlwdGlvbiA9IGRlc2NyaWJlKGdlbmVyYXRlQ2xvdGhlcyhxdWFudGl0aWVzKSk7XHJcbiAgICBjb25zdCBob2JieURlc2NyaXB0aW9uID0gdW5pZm9ybUNob2ljZShob2JiaWVzKS5uYW1lO1xyXG4gICAgY29uc3QgcGVyc29uYWxpdHkgPSB1bmlmb3JtQ2hvaWNlKFtcclxuICAgICAgICBcIllvdSBoYXZlIGFuIG91dGdvaW5nIHBlcnNvbmFsaXR5XCIsXHJcbiAgICAgICAgXCJZb3UncmUgYSBzaHkgZ2lybFwiLFxyXG4gICAgICAgIFwiWW91J3JlIGZ1bGwgb2YgZW5lcmd5XCIsXHJcbiAgICAgICAgXCJZb3UgaGF2ZSBhIHRvbWJveWlzaCBwZXJzb25hbGl0eVwiLFxyXG4gICAgXSlcclxuXHJcbiAgICBjb25zdCBpbml0aWFsRGVzY3JpcHRpb24gPSAgYFlvdXIgbmFtZSBpcyAke25hbWV9LCB5b3UncmUgYSAke2FnZX0geWVhciBvbGQgZ2lybCBsaXZpbmcgaW4gJHtjaXR5fS4gWW91J3JlICR7aGVpZ2h0fWNtIHRhbGwuICR7aGFpckRlc2NyaXB0aW9ufS4gWW91J3JlIHdlYXJpbmcgJHtjbG90aGVzRGVzY3JpcHRpb259LiBZb3VyICR7Y2hlc3REZXNjcmlwdGlvbn0gY2hlc3QgaXMgY292ZXJlZCBieSAke2JyYURlc2NyaXB0aW9ufS4gWW91IGxpa2UgJHtob2JieURlc2NyaXB0aW9ufS4gJHtwZXJzb25hbGl0eX0uYDtcclxuICAgIGNvbnN0IHBhcnRuZXJEZXNjcmlwdGlvbiA9IGRlc2NyaWJlUGFydG5lcihnZW5lcmF0ZVBhcnRuZXIoKSk7XHJcbiAgICByZXR1cm4gaW5pdGlhbERlc2NyaXB0aW9uICsgXCJcXG5cXG5cIiArIHBhcnRuZXJEZXNjcmlwdGlvbjtcclxufVxyXG5cclxuY29uc3QgcG9zaXRpdmVBZGplY3RpdmVzID0gW1xyXG4gICAgbmV3IERlc2NyaXB0aW9uKFwiYVwiLCBcImZhbmN5XCIpLFxyXG4gICAgbmV3IERlc2NyaXB0aW9uKFwiYVwiLCBcImN1dGVcIiksXHJcbiAgICBuZXcgRGVzY3JpcHRpb24oXCJhblwiLCBcImFkb3JhYmxlXCIpLFxyXG4gICAgbmV3IERlc2NyaXB0aW9uKFwiYVwiLCBcInBsYWluXCIpXHJcbl07XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZU5hbWUoKSB7XHJcbiAgICByZXR1cm4gdW5pZm9ybUNob2ljZShbXHJcbiAgICAgICAgXCJZb21pXCIsXHJcbiAgICAgICAgXCJSZWlcIixcclxuICAgICAgICBcIll1a2lcIixcclxuICAgICAgICBcIkFzdWthXCIsXHJcbiAgICAgICAgXCJFcmlcIixcclxuICAgICAgICBcIlNha3V5YVwiLFxyXG4gICAgICAgIFwiS2FyaW5cIixcclxuICAgICAgICBcIk5hb2tvXCIsXHJcbiAgICAgICAgXCJFcmluXCIsXHJcbiAgICAgICAgXCJFcmlrYVwiLFxyXG4gICAgICAgIFwiWXV1XCIsXHJcbiAgICAgICAgXCJNaW5hbWlcIixcclxuICAgICAgICBcIk1ha2lcIixcclxuICAgICAgICBcIkF5YWtvXCIsXHJcbiAgICAgICAgXCJOYWdpc2FcIixcclxuICAgICAgICBcIlNoaW9yaVwiLFxyXG4gICAgICAgIFwiTmF5dWtpXCIsXHJcbiAgICAgICAgXCJNaXl1a2lcIixcclxuICAgICAgICBcIkNoaWd1c2FcIixcclxuICAgICAgICBcIlJpblwiLFxyXG4gICAgICAgIFwiRW1pXCIsXHJcbiAgICAgICAgXCJOYW9taVwiLFxyXG4gICAgICAgIFwiVG9tb1wiLFxyXG4gICAgICAgIFwiU2F5YWthXCIsXHJcbiAgICAgICAgXCJNYWRva2FcIlxyXG4gICAgXSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlUG9zaXRpdmVBZGplY3RpdmUoKSB7XHJcbiAgICByZXR1cm4gdW5pZm9ybUNob2ljZShwb3NpdGl2ZUFkamVjdGl2ZXMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVBhcnRuZXIoKSB7XHJcbiAgICAvLyBUT0RPXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZXNjcmliZVBhcnRuZXIocGFydG5lciA6IHVuZGVmaW5lZCkge1xyXG4gICAgY29uc3Qgcm9sbCA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICBpZihyb2xsIDwgMC45NSlcclxuICAgICAgICByZXR1cm4gXCJZb3UgYXJlIGN1cnJlbnRseSBzaW5nbGUuXCI7XHJcbiAgICBpZihyb2xsIDwgMC45OSlcclxuICAgICAgICByZXR1cm4gXCJZb3UgaGF2ZSBhIGdpcmxmcmllbmQuXCI7XHJcbiAgICByZXR1cm4gXCJZb3UgaGF2ZSBhIGJveWZyaWVuZC5cIjtcclxufVxyXG5cclxuY29uc3QgY29sb3JzID0gW1xyXG4gICAgbmV3IERlc2NyaXB0aW9uKFwiYVwiLCBcInBpbmtcIiksXHJcbiAgICBuZXcgRGVzY3JpcHRpb24oXCJhXCIsIFwiYmxhY2tcIiksXHJcbiAgICBuZXcgRGVzY3JpcHRpb24oXCJhXCIsIFwid2hpdGVcIiksXHJcbiAgICBuZXcgRGVzY3JpcHRpb24oXCJhXCIsIFwiYmx1ZVwiKSxcclxuICAgIG5ldyBEZXNjcmlwdGlvbihcImFcIiwgXCJncmVlblwiKSxcclxuXTtcclxuY29uc3QgaG9iYmllcyA9IFtcclxuICAgIG5ldyBEZXNjcmlwdGlvbihudWxsLCBcImNvb2tpbmdcIiksXHJcbiAgICBuZXcgRGVzY3JpcHRpb24obnVsbCwgXCJwbGF5aW5nIGNvbXB1dGVyIGdhbWVzXCIpLFxyXG4gICAgbmV3IERlc2NyaXB0aW9uKG51bGwsIFwid2F0Y2hpbmcgYW5pbWVcIiksXHJcbiAgICBuZXcgRGVzY3JpcHRpb24obnVsbCwgXCJyZWFkaW5nIG1hbmdhXCIpLFxyXG4gICAgbmV3IERlc2NyaXB0aW9uKG51bGwsIFwiZHJlc3NpbmcgdXAgaW4gY3V0ZSBjbG90aGVzXCIpLFxyXG4gICAgbmV3IERlc2NyaXB0aW9uKG51bGwsIFwidHJhdmVsbGluZ1wiKSxcclxuICAgIG5ldyBEZXNjcmlwdGlvbihudWxsLCBcInNwb3J0c1wiKSxcclxuICAgIG5ldyBEZXNjcmlwdGlvbihudWxsLCBcImN5Y2xpbmdcIiksXHJcbl07XHJcblxyXG5jb25zdCBmdWxsQm9keUNsb3RoaW5nID0gbmV3IEVudGl0eShuZXcgRGVzY3JpcHRpb24oXCJhXCIsIFwiZnVsbCBib2R5IGNsb3RoaW5nXCIpKTtcclxuY29uc3QgZHJlc3MgPSBuZXcgRW50aXR5KG5ldyBEZXNjcmlwdGlvbihcImFcIiwgXCJkcmVzc1wiKSwgZnVsbEJvZHlDbG90aGluZyk7XHJcbmNvbnN0IHRvcHMgPSBbXHJcbiAgICBuZXcgRW50aXR5KG5ldyBEZXNjcmlwdGlvbihcImFcIiwgXCJzdW5kcmVzc1wiKSwgZHJlc3MpLFxyXG4gICAgbmV3IEVudGl0eShuZXcgRGVzY3JpcHRpb24oXCJhXCIsIFwidGFuayB0b3BcIikpLFxyXG4gICAgbmV3IEVudGl0eShuZXcgRGVzY3JpcHRpb24oXCJhXCIsIFwiY2FtaXNvbGVcIikpLFxyXG4gICAgZHJlc3NcclxuXTtcclxuY29uc3Qgc2tpcnQgPSBuZXcgRW50aXR5KG5ldyBEZXNjcmlwdGlvbihcImFcIiwgXCJza2lydFwiKSk7XHJcbmNvbnN0IGJvdHRvbXMgPSBbXHJcbiAgICBza2lydC53aXRoRGVzY3JpcHRpb25zKFsgbmV3IERlc2NyaXB0aW9uKFwiYVwiLCBcInBsZWF0ZWRcIikgXSksXHJcbiAgICBza2lydCxcclxuICAgIG5ldyBFbnRpdHkobmV3IERlc2NyaXB0aW9uKFwiYVwiLCBcIm1pbmlza2lydFwiKSksXHJcbiAgICBuZXcgRW50aXR5KG5ldyBEZXNjcmlwdGlvbihudWxsLCBcImxlZ2dpbmdzXCIpKSxcclxuICAgIG5ldyBFbnRpdHkobmV3IERlc2NyaXB0aW9uKG51bGwsIFwicGFudHNcIikpLFxyXG5dO1xyXG5jb25zdCBoZWFkQWRkaXRpb25zID0gW1xyXG4gICAgbmV3IEVudGl0eShuZXcgRGVzY3JpcHRpb24oXCJhXCIsIFwic3RyYXcgaGF0XCIpKVxyXG5dXHJcbmZ1bmN0aW9uIGdlbmVyYXRlQ2xvdGhlcyhxdWFudGl0aWVzIDogeyBcImhlaWdodFwiIDogbnVtYmVyLCBcImFnZVwiOiBudW1iZXIgfSkge1xyXG4gICAgY29uc3QgY2xvdGhlcyA9IG5ldyBBcnJheTxFbnRpdHk+KCk7XHJcbiAgICBpZihxdWFudGl0aWVzLmFnZSA8PSAxOCAmJiBNYXRoLnJhbmRvbSgpIDwgMC4yKSB7XHJcbiAgICAgICAgY2xvdGhlcy5wdXNoKG5ldyBFbnRpdHkobmV3IERlc2NyaXB0aW9uKFwiYVwiLCBcInNjaG9vbGdpcmwgdW5pZm9ybVwiKSwgZnVsbEJvZHlDbG90aGluZykpO1xyXG4gICAgICAgIHJldHVybiBjbG90aGVzO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdG9wID0gdW5pZm9ybUNob2ljZSh0b3BzKS53aXRoRGVzY3JpcHRpb25zKFsgZ2VuZXJhdGVQb3NpdGl2ZUFkamVjdGl2ZSgpIF0pO1xyXG4gICAgY2xvdGhlcy5wdXNoKHRvcCk7XHJcbiAgICBpZighdG9wLmlzT2ZTYW1lS2luZEFzKGZ1bGxCb2R5Q2xvdGhpbmcpKSB7XHJcbiAgICAgICAgY2xvdGhlcy5wdXNoKHVuaWZvcm1DaG9pY2UoYm90dG9tcykpO1xyXG4gICAgfVxyXG4gICAgaWYoTWF0aC5yYW5kb20oKSA8IDAuMilcclxuICAgIHtcclxuICAgICAgICBjbG90aGVzLnB1c2godW5pZm9ybUNob2ljZShoZWFkQWRkaXRpb25zKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2xvdGhlcztcclxufVxyXG5cclxuZnVuY3Rpb24gZGVzY3JpYmUoZW50aXRpZXMgOiBSZWFkb25seUFycmF5PEVudGl0eT4pIDogc3RyaW5nIHtcclxuICAgIGNvbnN0IGluZGl2aWR1YWxEZXNjcmlwdGlvbnMgPSBlbnRpdGllcy5tYXAoeCA9PiB7XHJcbiAgICAgICAgY29uc3QgZmlyc3RBcnRpY2xlID0geC5kZXNjcmlwdGlvbnNbMF0uYXJ0aWNsZTtcclxuICAgICAgICBsZXQgdGV4dCA9IHguZGVzY3JpcHRpb25zLm1hcCh4ID0+IHgubmFtZSkuam9pbihcIiBcIik7XHJcbiAgICAgICAgaWYoZmlyc3RBcnRpY2xlKVxyXG4gICAgICAgICAgICB0ZXh0ID0gZmlyc3RBcnRpY2xlICsgXCIgXCIgKyB0ZXh0O1xyXG4gICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBsYXN0RWxlbWVudCA9IGluZGl2aWR1YWxEZXNjcmlwdGlvbnMucG9wKCk7XHJcbiAgICBsZXQgZW50aXJlRGVzY3JpcHRpb24gPSBpbmRpdmlkdWFsRGVzY3JpcHRpb25zLmpvaW4oXCIsIFwiKTtcclxuICAgIGlmKGluZGl2aWR1YWxEZXNjcmlwdGlvbnMubGVuZ3RoICE9PSAwKVxyXG4gICAge1xyXG4gICAgICAgIGVudGlyZURlc2NyaXB0aW9uICs9IFwiIGFuZCBcIjtcclxuICAgIH1cclxuICAgIGlmKGxhc3RFbGVtZW50ICE9PSB1bmRlZmluZWQpXHJcbiAgICB7XHJcbiAgICAgICAgZW50aXJlRGVzY3JpcHRpb24gKz0gbGFzdEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZW50aXJlRGVzY3JpcHRpb247XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlSGFpckRlc2NyaXB0aW9uKCkge1xyXG4gICAgcmV0dXJuIHVuaWZvcm1DaG9pY2UoW1xyXG4gICAgICAgIFwiWW91ciBoYWlyIGlzIHRpZWQgaW4gYSBwb255dGFpbFwiLFxyXG4gICAgICAgIFwiWW91ciBoYWlyIGlzIHRpZWQgaW4gdHdpbnRhaWxzXCIsXHJcbiAgICAgICAgXCJZb3UgaGF2ZSBsb25nIGhhaXJcIixcclxuICAgICAgICBcIllvdXIgaGFpciBpcyBzaG9ydFwiLFxyXG4gICAgICAgIFwiWW91IGhhdmUgY3VybHkgaGFpclwiXSlcclxufVxyXG5cclxuY29uc3QgYWdlSGVpZ2h0RGlzdHJpYnV0aW9ucyA9IG5ldyBNYXA8bnVtYmVyLCB7IG1lYW4gOiBudW1iZXIsIHN0ZCA6IG51bWJlcn0+KFtcclxuICAgIFsxNSwgeyBtZWFuOiAxNTcuMzcsIHN0ZDogNS4yMyB9XSxcclxuICAgIFsxNiwgeyBtZWFuOiAxNTcuNDIsIHN0ZDogNS4wOCB9XSxcclxuICAgIFsxNywgeyBtZWFuOiAxNTguMTcsIHN0ZDogNS4zMSB9XSxcclxuICAgIFsxOCwgeyBtZWFuOiAxNTguMzYsIHN0ZDogNS4yNCB9XSxcclxuICAgIFsxOSwgeyBtZWFuOiAxNTguMTIsIHN0ZDogNS4zOCB9XSxcclxuICAgIFsyMCwgeyBtZWFuOiAxNTguNzAsIHN0ZDogNS4zMCB9XSxcclxuICAgIFsyMSwgeyBtZWFuOiAxNTguNzAsIHN0ZDogNS4zMCB9XSxcclxuICAgIFsyMiwgeyBtZWFuOiAxNTguNzAsIHN0ZDogNS4zMCB9XSxcclxuICAgIFsyMywgeyBtZWFuOiAxNTguNzAsIHN0ZDogNS4zMCB9XSxcclxuICAgIFsyNCwgeyBtZWFuOiAxNTguNzAsIHN0ZDogNS4zMCB9XVxyXG5dKTtcclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlUXVhbnRpdGllcygpIHtcclxuICAgIGNvbnN0IGFnZSA9IHVuaWZvcm1JbnQoMTUsIDIzKTtcclxuICAgIGNvbnN0IGhlaWdodERpc3RyaWJ1dGlvbiA9IGFnZUhlaWdodERpc3RyaWJ1dGlvbnMuZ2V0KGFnZSkhO1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5mbG9vcihub3JtYWwoaGVpZ2h0RGlzdHJpYnV0aW9uLm1lYW4sIGhlaWdodERpc3RyaWJ1dGlvbi5zdGQpKTtcclxuICAgIGNvbnN0IHF1YW50aXRpZXMgPSB7XHJcbiAgICAgICAgXCJhZ2VcIiA6IGFnZSxcclxuICAgICAgICBcImhlaWdodFwiIDogaGVpZ2h0LFxyXG4gICAgICAgIFwiYnVzdFwiIDogOTAsXHJcbiAgICAgICAgXCJ1bmRlcmJ1c3RcIiA6IDc1LFxyXG4gICAgICAgIFwid2Fpc3RcIiA6IDYwLFxyXG4gICAgICAgIFwiaGlwc1wiIDogOTBcclxuICAgIH1cclxuICAgIHJldHVybiBxdWFudGl0aWVzO1xyXG59XHJcblxyXG5cclxuY29uc3QgYnJhID0gbmV3IEVudGl0eShuZXcgRGVzY3JpcHRpb24oXCJhXCIsIFwiYnJhXCIpKVxyXG5jb25zdCBicmFUeXBlc0Rlc2NyaXB0aW9ucyA9IFtcclxuICAgIG5ldyBEZXNjcmlwdGlvbihcImFcIiwgXCJicmFsZXR0ZVwiKSxcclxuICAgIG5ldyBEZXNjcmlwdGlvbihcImFcIiwgXCJmdWxsLWN1cCBicmFcIiksXHJcbiAgICBuZXcgRGVzY3JpcHRpb24oXCJhXCIsIFwic3BvcnRzIGJyYVwiKSxcclxuICAgIG5ldyBEZXNjcmlwdGlvbihcImFcIiwgXCJwdXNoLXVwIGJyYVwiKVxyXG5dXHJcbmZ1bmN0aW9uIGdlbmVyYXRlQnJhKHF1YW50aXRpZXMgOiB7IFwiYnVzdFwiIDogbnVtYmVyLCBcInVuZGVyYnVzdFwiIDogbnVtYmVyIH0pIDogRW50aXR5IHtcclxuICAgIC8vY3V0T2ZmUmFuZ2UoYWRhcHRSYW5nZShub3JtYWxEaXN0cmlidXRpb25aZXJvVG9PbmUoKSwgNjUtMTAsIDg1KzEwKSwgNjUsIDg1KVxyXG4gICAgcmV0dXJuIG5ldyBFbnRpdHkoXHJcbiAgICAgICAgdW5pZm9ybUNob2ljZShicmFUeXBlc0Rlc2NyaXB0aW9ucyksXHJcbiAgICAgICAgYnJhLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgdW5pZm9ybUNob2ljZShwb3NpdGl2ZUFkamVjdGl2ZXMpLFxyXG4gICAgICAgICAgICB1bmlmb3JtQ2hvaWNlKGNvbG9ycylcclxuICAgICAgICBdLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgbmV3IERlc2NyaXB0aW9uKFwiYW5cIiwgXCJ1bmRlcmJ1c3RcIiwgbmV3IFZhbHVlKHF1YW50aXRpZXMudW5kZXJidXN0LCBuZXcgVmFsdWVDbGFzcyhcInVuZGVyYnVzdFwiLCBcImNtXCIpKSksXHJcbiAgICAgICAgICAgIG5ldyBEZXNjcmlwdGlvbihcImFcIiwgXCJidXN0XCIsIG5ldyBWYWx1ZShxdWFudGl0aWVzLmJ1c3QsIG5ldyBWYWx1ZUNsYXNzKFwiYnVzdFwiLCBcImNtXCIpKSlcclxuICAgICAgICBdXHJcbiAgICApXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlc2NyaWJlQ3VwU2l6ZShicmEgOiBFbnRpdHkpIHtcclxuICAgIGNvbnN0IHNpemVEaWZmZXJlbmNlID0gMDtcclxuICAgIGlmKHNpemVEaWZmZXJlbmNlIDwgMTIpIHJldHVybiBcIkFBXCI7XHJcbiAgICBpZihzaXplRGlmZmVyZW5jZSA8IDE0KSByZXR1cm4gXCJBXCI7XHJcbiAgICBpZihzaXplRGlmZmVyZW5jZSA8IDE2KSByZXR1cm4gXCJCXCI7XHJcbiAgICBpZihzaXplRGlmZmVyZW5jZSA8IDE4KSByZXR1cm4gXCJDXCI7XHJcbiAgICBpZihzaXplRGlmZmVyZW5jZSA8IDIwKSByZXR1cm4gXCJEXCI7XHJcbiAgICBpZihzaXplRGlmZmVyZW5jZSA8IDIyKSByZXR1cm4gXCJFXCI7XHJcbiAgICBpZihzaXplRGlmZmVyZW5jZSA8IDI0KSByZXR1cm4gXCJGXCI7XHJcbiAgICByZXR1cm4gXCJHXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlc2NyaWJlQnJhU2l6ZShicmEgOiBFbnRpdHkpIHtcclxuICAgIC8vIFRPRE9cclxuICAgIHJldHVybiB1bmlmb3JtQ2hvaWNlKFtcclxuICAgICAgICBcIm1vZGVzdFwiLFxyXG4gICAgICAgIFwic21hbGxcIixcclxuICAgICAgICBcIm1vZGVyYXRlXCIsXHJcbiAgICAgICAgXCJtb2Rlc3RcIixcclxuICAgICAgICBcIm1vZGVzdFwiLFxyXG4gICAgICAgIFwibW9kZXN0XCIsXHJcbiAgICAgICAgXCJsYXJnZVwiLFxyXG4gICAgICAgIFwidm9sdW1wdHVvdXNcIlxyXG4gICAgXSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlc2NyaWJlQnJhKGJyYSA6IEVudGl0eSkge1xyXG4gICAgXHJcbn1cclxuXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFuZ2UtbWUnKSEub25jbGljayA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFuZ2UtbWUnKSEuc3R5bGUuY3NzVGV4dCA9IFwiZGlzcGxheTogbm9uZVwiO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uLWludHJvZHVjdGlvbicpIS5pbm5lclRleHQgPSByZXJvbGwoKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbi1vdmVyYWxsJykhLnN0eWxlLmNzc1RleHQgPSBcImRpc3BsYXk6IGJsb2NrXCI7XHJcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==</script></body>
</html>